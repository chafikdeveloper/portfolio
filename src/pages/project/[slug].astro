---
import type { GetStaticPaths } from "astro";
import Layout from "@/layouts/Layout.astro";
import { getCollection, } from "astro:content";
import { Image } from "astro:assets";

export async function getStaticPaths() {
    const projects = await getCollection("projects");
    
    const paths = await Promise.all(
        projects.map(project => {
            return {
                params: {slug: project.slug},
                props: {project: project}
            }
        })
    )
    return paths;
}

const {project} = Astro.props;
const {Content} = await project.render()
---

<Layout>
    <section class="px-6 lg:px-10 py-6 lg:py-10 mx-auto max-w-7xl">
        <h1 class="font-bold text-2xl text-center">{project.data.title}</h1>

        <div class="flex gap-2 justify-center my-4">
            {project.data.tags.map(tag => (
                <p class="px-1.5 py-0.5 text-xs rounded-full bg-sky-600 text-white">{tag}</p>
            ))}
        </div>

        <Image src={project.data.cover} alt={project.data.title} class="object-cover rounded-md w-full my-4" width={1024} height={500} />

        <div class="prose prose-lg flex flex-col min-w-full">
            <Content />
        </div>
    </section>
</Layout>